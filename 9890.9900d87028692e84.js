"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9890],{9890:(E,_,c)=>{c.r(_),c.d(_,{CartPage:()=>k});var l=c(467),p=c(177),g=c(4341),a=c(543),v=c(4742),t=c(4438),h=c(369),f=c(9438),m=c(6868);const C=["mySelect"],P=(r,s)=>s.id;function O(r,s){if(1&r){const n=t.RV6();t.j41(0,"ion-icon",40),t.bIt("click",function(){t.eBV(n);const e=t.XpG().$implicit,o=t.XpG(2);return t.Njj(o.removeProduct(e))}),t.k0s()}}function b(r,s){if(1&r){const n=t.RV6();t.j41(0,"ion-icon",41),t.bIt("click",function(){t.eBV(n);const e=t.XpG().$implicit,o=t.XpG(2);return t.Njj(o.removeProduct(e))}),t.k0s()}}function x(r,s){if(1&r){const n=t.RV6();t.j41(0,"ion-row",9)(1,"ion-col",27)(2,"div",28),t.nrm(3,"div",29),t.j41(4,"div",30)(5,"p",31),t.EFF(6),t.k0s(),t.j41(7,"div",32)(8,"p",33),t.EFF(9),t.k0s(),t.j41(10,"h3",34),t.EFF(11),t.k0s()()(),t.j41(12,"div",35),t.DNE(13,O,1,0,"ion-icon",36)(14,b,1,0,"ion-icon",37),t.j41(15,"p",38),t.EFF(16),t.k0s(),t.j41(17,"ion-icon",39),t.bIt("click",function(){const e=t.eBV(n).$implicit,o=t.XpG(2);return t.Njj(o.addQuantity(e))}),t.k0s()()()()()}if(2&r){const n=s.$implicit,i=t.XpG(2);t.R7$(3),t.muq("background-image: url(",i.productImage[n.id],"); background-size: cover; background-position: center; height: 70px;"),t.R7$(3),t.JRh(n.name),t.R7$(3),t.JRh(n.price.toString().includes(".")?n.price.toString().replace(".",",")+"0\u20ac / pc":n.price+",00\u20ac / pc"),t.R7$(2),t.JRh((n.price*n.quantity).toString().includes(".")?n.price*n.quantity.toString().replace(".",",")+"0\u20ac":n.price*n.quantity+",00\u20ac"),t.R7$(2),t.vxM(1==n.quantity?13:14),t.R7$(3),t.JRh(n.quantity)}}function y(r,s){if(1&r){const n=t.RV6();t.j41(0,"ion-content",2)(1,"ion-header",6)(2,"ion-toolbar")(3,"ion-title",7),t.EFF(4,"cart"),t.k0s()()(),t.j41(5,"ion-grid",8),t.Z7z(6,x,18,8,"ion-row",9,P),t.k0s(),t.j41(8,"div",10),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.openSelect())}),t.nrm(9,"ion-icon",11),t.j41(10,"div",12)(11,"div",13)(12,"p",14),t.EFF(13,"Point de Livraison"),t.k0s(),t.j41(14,"p",15),t.EFF(15),t.k0s()(),t.nrm(16,"ion-icon",16),t.k0s()(),t.j41(17,"div",17)(18,"h2"),t.EFF(19,"Total"),t.k0s(),t.j41(20,"h2"),t.EFF(21),t.k0s()(),t.j41(22,"ion-list",18)(23,"ion-item")(24,"ion-select",19,0),t.bIt("ionChange",function(e){t.eBV(n);const o=t.XpG();return t.Njj(o.onSelectChange(e))}),t.j41(26,"ion-select-option",20),t.EFF(27,"Bistrot des Gascons"),t.k0s(),t.j41(28,"ion-select-option",21),t.EFF(29,"Caf\xe9 des Phares"),t.k0s(),t.j41(30,"ion-select-option",22),t.EFF(31,"le Vert Tulipe"),t.k0s(),t.j41(32,"ion-select-option",23),t.EFF(33,"Ruche qui dit Oui"),t.k0s()()()(),t.nrm(34,"div",24),t.k0s(),t.j41(35,"div",25)(36,"button",26),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.validateOrder(!0))}),t.EFF(37," Valider "),t.k0s()()}if(2&r){const n=t.XpG();t.Y8G("fullscreen",!0),t.R7$(6),t.Dyx(n.cartProducts),t.R7$(9),t.JRh(n.selectedLivraisonPoint?n.selectedLivraisonPoint:"Veuillez s\xe9lectionner un point de livraison"),t.R7$(6),t.JRh(n.getTotalPrice())}}function F(r,s){1&r&&(t.j41(0,"ion-content",2)(1,"h1"),t.EFF(2,"Pannier Vide"),t.k0s()()),2&r&&t.Y8G("fullscreen",!0)}let k=(()=>{var r;class s{constructor(i,e,o){this.storage=i,this.productService=e,this.cartService=o,this.openValidateOrder=!1,this.openValidateOrderSuccess=!1,this.alertButtons=["Ok"],this.openAlertselect=!1,this.validateOrderButtons=[{text:"Annuler",role:"cancel",handler:()=>{console.log("Alert canceled")}},{text:"Valider",role:"confirm",handler:()=>{this.validateOrderSuccess(!0)}}]}ionViewWillEnter(){var i=this;return(0,l.A)(function*(){const e=yield i.cartService.getCart();i.cartProducts=Object.values(e)})()}ngOnInit(){var i=this;return(0,l.A)(function*(){i.productImage=i.productService.getProductImages();const e=yield i.cartService.getCart();i.cartProducts=Object.values(e)})()}trackById(i,e){return e.id}clearCart(){var i=this;return(0,l.A)(function*(){yield i.cartService.clearCart(),i.refreshCartProducts()})()}refreshCartProducts(){var i=this;return(0,l.A)(function*(){const e=yield i.cartService.getCart();i.cartProducts=Object.values(e)})()}removeProduct(i){var e=this;return(0,l.A)(function*(){yield e.cartService.removeFromCart(i),e.refreshCartProducts()})()}addQuantity(i){var e=this;return(0,l.A)(function*(){yield e.cartService.addQuantity(i),e.refreshCartProducts()})()}getTotalPrice(){var i;const e=null===(i=this.cartProducts)||void 0===i?void 0:i.reduce((o,d)=>o+d.price*d.quantity,0);return null!=e&&e.toString().includes(".")?(null==e?void 0:e.toString().replace(".",","))+"0\u20ac":e+",00\u20ac"}openSelect(){this.mySelect.open()}onSelectChange(i){this.selectedLivraisonPoint=i.detail.value}validateOrder(i){console.log("validate order",this.selectedLivraisonPoint),this.selectedLivraisonPoint?(this.openValidateOrder=i,console.log(this.openValidateOrder)):this.openAlertselect=i}validateOrderSuccess(i){const e=new Date,o=e.getDay();let d=0;d=o<=3?3-o:o<=6?6-o:0;const u=new Date(e);u.setDate(e.getDate()+d),this.validationMessage="Vous pourrais r\xe9cup\xe9rer votre commande au point de livraison : "+this.selectedLivraisonPoint+", le "+u.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),this.openValidateOrderSuccess=i,this.clearCart()}}return(r=s).\u0275fac=function(i){return new(i||r)(t.rXU(h.w),t.rXU(f.g),t.rXU(m.m))},r.\u0275cmp=t.VBU({type:r,selectors:[["app-cart"]],viewQuery:function(i,e){if(1&i&&t.GBs(C,5),2&i){let o;t.mGM(o=t.lsd())&&(e.mySelect=o.first)}},standalone:!0,features:[t.Jv_([v.W3]),t.aNF],decls:9,vars:10,consts:[["mySelect",""],[3,"translucent"],[3,"fullscreen"],["header","Commande Valid\xe9e avec Succ\xe8s !",3,"didDismiss","isOpen","message","buttons"],["header","Veuillez s\xe9lectionner un point de livraison",3,"didDismiss","isOpen","buttons"],["header","Souhaitez-vous valider votre commande ?",3,"didDismiss","isOpen","subHeader","buttons"],["collapse","condense"],["size","large"],[1,"product-grid"],[1,"product-row",2,"margin","8px"],[1,"div-livraison",3,"click"],["src","../../assets/storefront_16dp_5F6368_FILL0_wght400_GRAD0_opsz20.svg",1,"store-icon"],[1,"right"],[1,"texte-livraison"],[1,"livraison-title"],[1,"livraison-description"],["src","../../assets//arrow_forward_ios_16dp_5F6368_FILL0_wght400_GRAD0_opsz20.svg",1,"arrow-icon"],[1,"total-div"],[2,"display","none"],["aria-label","Favorite Fruit","value","apple",3,"ionChange"],["value","Bistrot des Gascons"],["value","Caf\xe9 des Phares"],["value","le Vert Tulipe"],["value","Ruche qui dit Oui"],[1,"bottom-div"],[1,"div-btn"],[1,"validate-btn",3,"click"],["size","12"],[1,"product-div"],[1,"product-div-image"],[1,"product-div-description"],[1,"product-title"],[1,"product-div-price"],[1,"product-price-unit"],[1,"product-price-subtotal"],[1,"product-div-quantity"],["src","../../assets/delete_16dp_5F6368_FILL0_wght400_GRAD0_opsz20.svg",1,"delete-icon"],["src","../../assets/remove_16dp_5F6368_FILL0_wght400_GRAD0_opsz20 (copy).svg",1,"remove-icon"],[1,"product-price"],["src","../../assets/add_16dp_5F6368_FILL0_wght400_GRAD0_opsz20 (copy).svg",1,"add-icon",3,"click"],["src","../../assets/delete_16dp_5F6368_FILL0_wght400_GRAD0_opsz20.svg",1,"delete-icon",3,"click"],["src","../../assets/remove_16dp_5F6368_FILL0_wght400_GRAD0_opsz20 (copy).svg",1,"remove-icon",3,"click"]],template:function(i,e){1&i&&(t.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"h1"),t.EFF(3,"Pannier"),t.k0s()()(),t.DNE(4,y,38,3)(5,F,3,1,"ion-content",2),t.j41(6,"ion-alert",3),t.bIt("didDismiss",function(){return e.validateOrderSuccess(!1)}),t.k0s(),t.j41(7,"ion-alert",4),t.bIt("didDismiss",function(){return e.validateOrder(!1)}),t.k0s(),t.j41(8,"ion-alert",5),t.bIt("didDismiss",function(){return e.validateOrder(!1)}),t.k0s()),2&i&&(t.Y8G("translucent",!0),t.R7$(4),t.vxM(e.cartProducts&&e.cartProducts.length>0?4:5),t.R7$(2),t.Y8G("isOpen",e.openValidateOrderSuccess)("message",e.validationMessage)("buttons",e.alertButtons),t.R7$(),t.Y8G("isOpen",e.openAlertselect)("buttons",e.alertButtons),t.R7$(),t.Y8G("isOpen",e.openValidateOrder)("subHeader",e.getTotalPrice())("buttons",e.validateOrderButtons))},dependencies:[a.hU,a.ln,a.lO,a.W9,a.eU,a.BC,a.ai,p.MD,g.YN,a.iq,a.nf,a.uz,a.Nm,a.Ip,a.Zy],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0}.header-content[_ngcontent-%COMP%]{height:200px;background-color:red;scroll-behavior:unset}h1[_ngcontent-%COMP%]{text-align:center;padding-top:10px}.product-row[_ngcontent-%COMP%]{height:90px;border-bottom:1px solid #ccc}.product-div[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.product-div-image[_ngcontent-%COMP%]{height:70px;width:70px;border-radius:15px;position:relative}.product-div-description[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;flex-grow:1;padding-left:10px}.product-div-quantity[_ngcontent-%COMP%]{width:85px;height:40px;margin:0 10px;display:flex;justify-content:space-between;background-color:#e6e6e6;border-radius:10px;align-items:center;padding:0 10px}.product-div-price[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.product-price-unit[_ngcontent-%COMP%]{font-size:1em;font-weight:200}.product-price-subtotal[_ngcontent-%COMP%]{font-size:1.2em;font-weight:300}.add-cart-btn[_ngcontent-%COMP%]{position:absolute;bottom:2px;right:2px;height:20px;width:20px;background-color:#fff;border-radius:100%;box-shadow:0 4px 6px #0000001a}.remove-icon[_ngcontent-%COMP%], .add-icon[_ngcontent-%COMP%], .delete-icon[_ngcontent-%COMP%]{height:25px;width:25px}.product-title[_ngcontent-%COMP%]{font-size:1.2em;font-weight:400}.product-price[_ngcontent-%COMP%]{font-size:1em;font-weight:300}.div-livraison[_ngcontent-%COMP%]{display:flex;padding:0 10px}.store-icon[_ngcontent-%COMP%]{height:40px;width:40px;align-self:center;margin-right:10px}.right[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%;border-bottom:1px solid #ccc;padding-top:5px;padding-bottom:15px}.livraison-title[_ngcontent-%COMP%]{font-size:1.5em;font-weight:600}.livraison-description[_ngcontent-%COMP%]{font-size:1em;font-weight:300}.arrow-icon[_ngcontent-%COMP%]{height:25px;width:25px;align-self:center;margin-left:10px;color:#0ff}.total-div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px}.validate-btn[_ngcontent-%COMP%]{width:95%;height:70px;background-color:#000;color:#fff;font-size:1.7em;font-weight:700;border-radius:25px;display:flex;justify-content:center;align-items:center;margin:10px;justify-self:center}.bottom-div[_ngcontent-%COMP%]{height:150px}.div-btn[_ngcontent-%COMP%]{width:100%;position:absolute;bottom:0;background-color:#fff}ion-button[_ngcontent-%COMP%]{--background: black;--background-hover: #9ce0be;--background-activated: #88f4be;--background-focused: #88f4be;--color: white;--border-color: #000;--border-style: solid;--border-width: 1px;--box-shadow: 0 2px 6px 0 rgb(0, 0, 0, .25);--ripple-color: grey;--padding-top: 10px;--padding-bottom: 10px}"]}),s})()}}]);